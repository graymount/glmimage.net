# glmimage.net 项目计划

## 1. 项目定位

glmimage.net 不是一个通用的 AI 图像生成网站。

它是一个 **视觉方向决策工具**，用于帮助用户在最短时间内确认一个「值得继续深化的视觉路线」。

本项目的核心价值不是"生成更多图片"，而是**减少犹豫、试错和不确定性**。

---

## 2. 核心问题（要解决什么）

当前 AI 图像生成的主要痛点：
- 同一个 prompt，需要在不同模型 / 平台之间反复切换
- 用户无法判断：是 prompt 不好，还是模型路线不对
- 冷却、排队、次数限制频繁打断创作思考流
- 试错成本高，导致用户不敢大胆尝试

---

## 3. 核心目标（V1）

**一次 prompt → 一次方向确认**

V1 的唯一目标是：
- 让用户在 5–10 分钟内
- 通过多模型对比
- 明确选定一个「可以继续深化」的视觉方向

---

## 4. 非目标（明确不做）

以下内容 **不属于 V1 范围**：
- 社区 / 分享 / 作品广场
- Prompt 市场
- 模型参数深度配置
- 图片编辑（重绘、局部修改）
- SEO 内容体系
- 多语言支持

---

## 5. 目标用户

### 核心用户
- 内容创作者（封面、配图）
- 设计师、产品经理
- 已具备基础 Prompt 能力
- 时间比金钱更敏感

### 非核心用户
- 纯试玩用户
- 只要一张"差不多就行"的用户

---

## 6. 核心功能（V1）

### 6.1 多模型并发生成（必须）
- 用户输入一个 prompt
- 系统同时调用 4–6 个风格差异明显的大模型
- 所有结果在同一页面展示
- 模型需带有清晰的「风格 / 性格标签」

**目标：** 一次生成，暴露多种可能性，而不是堆数量。

### 6.2 默认对比视图（必须）
- 多模型结果默认进入对比状态
- 无需额外点击即可对比
- 强调差异而非数量

### 6.3 明确选择机制（必须）
- 用户必须选择一个"当前最优结果"
- 选择后才能继续下一轮生成
- 选择行为用于后续模型偏好学习（V2）

### 6.4 连续生成（爽档专属）
- 爽档用户无冷却、无排队
- 不展示次数 / 配额 / GPU 信息
- 系统可后台进行串行、降配等成本控制

---

## 7. 用户流程（V1）

1. 进入 glmimage.net 首页
2. 输入 prompt
3. 点击「一次性对比生成」
4. 查看多模型结果
5. 选择一个"最优方向"
6. 点击「基于此继续」
7. 重复步骤 3–6

整个流程：
- 无跳转
- 无中断
- 无复杂设置

---

## 8. 试用与付费策略

### 试用策略
- 新用户可体验完整爽档
- 限制为：
  - 10 分钟 或
  - 20 次生成（先到为准）

### 付费策略
- 爽档为高价方案
- 不强调"次数 / 算力"
- 售卖的是「不中断的创作体验」

---

## 9. 技术与工程约束

- 使用 ShipAny 作为工程脚手架
- 重用登录、订阅、计费模块
- 首页与核心页面需完全自定义
- UI 极度克制，避免功能堆叠

### 技术栈
- **框架**: Next.js (App Router)
- **认证**: better-auth（支持 Google OAuth、Email/Password）
- **数据库**: PostgreSQL (Neon)，ORM 使用 Drizzle
- **样式**: Tailwind CSS + shadcn/ui
- **部署**: Vercel
- **包管理**: pnpm

### 域名与环境
- **生产域名**: `https://www.glmimage.net`（带 www，DNS 自动重定向）
- **Google OAuth 回调**: `https://www.glmimage.net/api/auth/callback/google`
- **Google Cloud 项目**: AIImage (`aiimage-471212`)
- **环境变量**: 本地 `.env.local`，生产 Vercel Environment Variables
- **注意**: `NEXT_PUBLIC_APP_URL` 必须与实际域名一致（含 www）

### 关键目录结构
- `src/core/auth/` — 认证核心（config.ts, client.ts, index.ts）
- `src/shared/blocks/sign/` — 登录/注册 UI 组件
- `src/shared/services/settings.ts` — 系统设置定义（含 Google OAuth 开关）
- `src/shared/models/config.ts` — 数据库配置读取
- `src/shared/services/rbac.ts` — 角色权限管理
- `src/app/api/auth/[...all]/route.ts` — 认证 API 路由
- `scripts/` — 运维脚本（init-rbac, assign-role 等）

### 管理员
- **Super Admin**: wnfng.liu@gmail.com
- **管理后台**: `/admin`（需 super_admin 或 admin 角色）

---

## 10. 成功指标（必须监控）

- 单次会话生成次数
- 多模型结果的选择率
- 选择后继续生成比例
- 试用 → 付费转化率
- 爽档用户平均会话时长

---

## 11. 失败判定

若出现以下情况之一，需重新评估方向：
- 用户不愿意做"选择"
- 多模型结果被当作"图库浏览"
- 爽档与普通模式体验差异不明显
- 用户核心反馈集中在"功能不够多"

---

## 12. 核心产品原则（不可违背）

- 不为所有人设计
- 宁可删功能，也不增加认知负担
- 不打断用户思考流
- 让系统承担判断压力，而不是用户

---

## 13. 项目阶段划分

### Phase 1（V1）
- 多模型并发
- 对比 + 选择
- 连续生成
- 试用 + 付费

### Phase 2（V2，未来）
- Prompt 演化链
- 模型偏好学习
- 方向锁定模式
- 更深层对比解释

---

## 14. 一句话总结（给 AI 看的）

> glmimage.net 的工作不是"生成图片"，
> 而是 **帮用户更快、更确定地做出视觉决策**。

---

## 使用建议

- 在让 Claude / Cursor 生成代码、UI、文案前：
  > "请严格遵守 CLAUDE.md，不要扩展功能范围"
